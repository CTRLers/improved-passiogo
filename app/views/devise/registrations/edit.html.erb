<div class="min-h-screen flex">

  <!-- Right Panel: Edit Profile Form -->
  <div class="flex flex-col justify-center items-center md:w-full p-6 bg-gray-50 mx-auto">
    <div class="bg-white p-8 rounded shadow-lg w-full max-w-md">
      <h2 class="text-2xl font-bold mb-4">Edit Your Profile</h2>

      <!-- Devise error messages -->
      <%= render "devise/shared/error_messages", resource: resource %>

      <%= form_for(resource,
                   as: resource_name,
                   url: registration_path(resource_name),
                   html: { method: :put, class: "space-y-6" }) do |f| %>

        <!-- Email -->
        <%= render Forms::TextInputComponent.new(
          form: f,
          field: :email,
          label: "Email Address",
          placeholder: "Email Address",
          field_type: :email_field,
          autocomplete: "email"
        ) %>

        <!-- New Password -->
        <%= render Forms::TextInputComponent.new(
          form: f,
          field: :password,
          label: "New Password (leave blank to keep current)",
          placeholder: "Password",
          field_type: :password_field,
          autocomplete: "new-password"
        ) %>
        <% if @minimum_password_length %>
          <p class="text-xs text-gray-500">
            (<%= @minimum_password_length %> characters minimum)
          </p>
        <% end %>

        <!-- Confirm New Password -->
        <%= render Forms::TextInputComponent.new(
          form: f,
          field: :password_confirmation,
          label: "Confirm New Password",
          placeholder: "Confirm Password",
          field_type: :password_field,
          autocomplete: "new-password"
        ) %>

        <!-- Current Password -->
        <%= render Forms::TextInputComponent.new(
          form: f,
          field: :current_password,
          label: "Current Password",
          placeholder: "Current Password",
          field_type: :password_field,
          hint: "We need this to confirm your changes"
        ) %>

        <!-- Actions -->
        <div class="flex flex-col sm:flex-row sm:space-x-4 mt-6">
          <%= f.submit "Update Profile",
                       class: "w-full sm:flex-1 bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 rounded transition" %>

          <%= link_to "Back to Dashboard",
                      :back,
                      class: "w-full sm:flex-1 text-center bg-gray-200 hover:bg-gray-300 text-gray-700 font-bold py-2 rounded transition mt-2 sm:mt-0" %>
        </div>

        <div class="text-center mt-4">
          <%= button_to "Cancel my account",
                      registration_path(resource_name),
                      method: :delete,
                      data: { confirm: "Are you sure you want to cancel your account?" },
                      class: "text-red-500 hover:underline" %>
        </div>
      <% end %>
    </div>
  </div>
</div>
