# test/models/current_stop_test.rb
require "test_helper"

class CurrentStopTest < ActiveSupport::TestCase
  test "should be optional for route" do
    route = Route.create!(name: "Optional Stop Route")
    assert_nil route.current_stop
  end

  test "can assign a valid stop as current_stop" do
    route = Route.create!(name: "Route 1")
    stop = Stop.create!(name: "Main", latitude: 0.0, longitude: 0.0, route: route, position: 1)
    route.current_stop = stop
    assert route.save
    assert_equal stop, route.reload.current_stop
  end
end
